{% extends "base.html" %}

{% block content %}

<div class="post_heading"><div class="post_title"><a href="/blog/{{post.id}}">{{ post.title }}</div></a><div class="post_date">{{ post.created }}</div></div>

<div class ="post_body">
    {{ post.body|safe }}
</div>

<div class="tags">
    Tags:
	{% for tag in post.tags.all %}
		<a href="/blog/tag/{{tag}}">{{tag}}</a>
		{% if not forloop.last %}, {% endif %}
	{% endfor %}
</div>

{% if comments %}
    <p>Comments:</p>
{% endif %}

{% for comment in comments %}

    <div class="comment_heading">
        <div class="{% if comment.creator %}comment_title_reg{% else %}comment_title{% endif %}">{{ comment.author }}</div> <div class="post_date">{{ comment.created }}</div>
    </div>
        <div class="post_body">{{ comment.body|safe }}</div>
    
{% endfor %}

{% if message %}
	{{ message }}
{% endif %}

<div class="add_comment">Add a comment (Markdown accepted)</div>
<form action="{% url blog.views.add_comment post.id %}" method="POST">{% csrf_token %}
    <table><tr><td>Author:</td><td class="form">
        {% if user.is_active %}
        <span class="author">{{ user }}</span>
        {% else %}
        {{ form.author }}
        {% endif %}
        </td></tr>
        <td>Body:</td><td class="form">{{ form.body_markdown }}</td></tr>
    </table>
    <input type="submit" value="Submit">
</form>
{% endblock %}
